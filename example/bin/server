#!/usr/bin/env node
'use strict';

// Example Slay application
const app = require('../lib/');

app.start({
  config: {
    close: {
      freeAfter: 1,
      killAfter: 30
    }
  },
  http: 0
}, function listen(error, app) {
  if (error) {
    app.log.error(error.message);
    process.exit(1);
  }

  process.on('SIGTERM', function () {
    app.close(function (e) {
      if (e) {
        console.error(e);
        process.exit(1);
      } else {
        process.exit(0)
      }
    });
  });

  const address = app.servers.http.address();
  app.log.info('App started on %d', address.port);
  app.log.info(`Open http://127.0.0.1:${address.port}/ in a browser.`);
});
